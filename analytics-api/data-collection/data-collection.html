<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Data Collection Sample</title>
    <style>
        body {
            font-family: Helvetica, Arial, sans-serif;
            margin-top: 40px;
            margin-left: 40px;
        }
        .analytics-event {
            color: #ff0000;
        }
        .player-event {
            color: #6e9fb3;
        }
        .legend {
            width: 1em;
        }
        div#player {
            float: left;
            margin-right: 20px;
        }
    </style>
  </head>
  <body>
  <h1>Data Collection Sample</h1>
<div id="player">
<!-- Start of Brightcove Player -->
<script language="JavaScript" type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script>

<object id="myExperience928199562001" class="BrightcoveExperience">
  <param name="bgcolor" value="#FFFFFF" />
  <param name="width" value="480" />
  <param name="height" value="270" />
  <param name="playerID" value="921267190001" />
  <param name="playerKey" value="AQ~~,AAAA1oy1bvE~,ALl2ezBj3WG3MLvDx9F9zkV06cNK00ey" />
  <param name="isVid" value="true" />
  <param name="isUI" value="true" />
  <param name="dynamicStreaming" value="true" />
  <param name="@videoPlayer" value="928199562001" />

  <param name="includeAPI" value="true" />
  <param name="templateLoadHandler" value="BCLS.onTemplateLoaded" />
  <param name="templateReadyHandler" value="BCLS.onTemplateReady">
</object>

<script type="text/javascript">//brightcove.createExperiences();</script>

<!-- End of Brightcove Player -->
<div>
<p><button id="changeVideoBtn">Change Video</button></p>
<p><button id="resetBtn">Reset</button></p>
</div>
</div>
<div id="eventLog"></div>
<form id="analyticsRequest" action="">
    <input id="requestURL" type="hidden" />
</form>
</div>
<script>
var BCLS = (function (brightcove, window, document, console) {
    "use strict";
    var counter = 0, // counter for progress events
        // page elements
        eventLog = document.getElementById("eventLog"),
        changeVideoBtn = document.getElementById("changeVideoBtn"),
        resetBtn = document.getElementById("resetBtn"),
        analyticsRequest = document.getElementById("anaylyticsRequest"),
        requestURL = document.getElementById("requestURL"),
        // page properties
        userInfo = window.navigator,
        // player id - easier to hard-code this - hard to get through JavaScript
        playerID = 921267190001,
        // for Smart Player API references
        player,
        modVP,
        videosToSwap = [928199562001, 2101639723001], //videos we will swap
        // functions
        onTemplateLoaded,
        onTemplateReady,
        onMediaEventFired,
        changeVideo,
        logEvent,
        reset;
    console.log(userInfo);
    // event logger
    logEvent = function (str) {
        eventLog.innerHTML += str + "<br />";
    };
    // player load handler
    onTemplateLoaded = function (experienceID) {
        var str = "";
        str = "<span class=\"player-event\">Player event: player loaded</span>";
        console.log("loaded");
        logEvent(str);
        // player modules
        player = brightcove.api.getExperience(experienceID);
        modVP = player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);
        // document event handlers
        changeVideoBtn.addEventHandler("click", BCLS.changeVideo);
        resetBtn.addEventListener("click", BCLS.reset);
    };
    // player ready handler
    onTemplateReady = function  (evt) {
        console.log("ready");
        modVP.addEventListener(brightcove.api.events.MediaEvent.BEGIN, BCLS.onMediaEventFired);
        // modVP.addEventListener(brightcove.api.events.MediaEvent.CHANGE, BCLS.onMediaEventFired);
        // modVP.addEventListener(brightcove.api.events.MediaEvent.COMPLETE, BCLS.onMediaEventFired);
        // modVP.addEventListener(brightcove.api.events.MediaEvent.PROGRESS, BCLS.onMediaEventFired);
    };
    // media event handler
    onMediaEventFired = function (evt) {
       var str = "";
       console.log(evt);
       switch (evt.type) {
           case "mediaBegin":

           str = "<span class=\"player-event\">Player event: video begin</span>";
           break;
           case "mediaComplete":
           changeVideo();
           break;
           case "mediaProgress":
           if (counter % 100 === 0) {
                str = "<span class=\"player-event\">Player event: progress (" + counter + ")</span>";
           }
           counter++;
           break;
           default:
           break;
       }
    };
    // video swapper
    changeVideo = function () {
       console.log("change");
       modVP.getCurrentVideo(function (dto) {
           if (dto.id === videosToSwap[0]) {
              modVP.loadVideoByID(videosToSwap[1]);
           } else {
              modVP.loadVideoByID(videosToSwap[0]);
           };
       });
    };
    // empty the log, reset the counter
    reset = function (currentVideo) {
       document.getElementById("eventLog").innerHTML = "";
       counter = 0;
    };

    return {
        onTemplateLoaded : onTemplateLoaded,
        onTemplateReady: onTemplateReady,
        onMediaEventFired: onMediaEventFired,
        changeVideo: changeVideo,
        reset: reset
    };
})(brightcove, window, document, console);
</script>

  </body>
</html>


