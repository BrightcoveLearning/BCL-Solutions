<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <style>

    </style>
  </head>
  <body>
    <pre id="results"></pre>
      <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <script type="text/javascript" src="./assets/cbs7.js"></script>
    <script>
      var videoIDs = [],
          i = 0,
          iMax = videoData[0].length,
          params = {},
          baseURL = "https://cms.api.brightcove.com/v1beta1/accounts/3755095928001/videos?q=referenceID:",
          results = document.getElementById("results"),
          callMapi,
          printResults,
          getRefID;



      getRefID = function () {
        var refID;
        console.log("iMax", iMax);
        if (i < iMax) {
          refID = videoData[0][i].reference_id;
          console.log("refID", refID);
          callMapi(refID);
        } else {
          printResults();
        }
      }

      callMapi = function (refID) {
        var options = {};
      options.client_id = "e1eb6598-2129-4507-a7f5-4a59dc45f01e";
      options.client_secret = "wx_pO6WXKrpxAgLTuU6uYt9LykQzUopgGN3DdhNRaNynkgUwcse9-2V8Vk8zIbInqYq5wSnGzCH1KqWv6tVN3A";
      // options.requestBody = cleanString($ajax_requestBody.val());
      options.requestType = "GET";
      options.url = baseURL + refID;
      console.log(options);
      $.ajax({
        url: "http://solutions.brightcove.com:8006",
        type: "POST",
        data: options,
        success : function (data) {
          console.log("data", data);
          videoIDs.push(data[0].id)
          i++;
          // getRefID();
        },
        error : function (XMLHttpRequest, textStatus, errorThrown) {
          results.innerHTML = "Sorry, your request was not successful. Here is what the server sent back: " + errorThrown;
        }
      });
      }
      printResults = function () {
        var results = document.getElementById("results");
        results.innerHTML = JSON.stringify(videoIDs, null, "  ");
      }
      getRefID();
    </script>
  </body>
</html>
